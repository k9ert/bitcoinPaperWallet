<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Paper Wallet Transaction Creator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bitcoin Paper Wallet Transaction Creator</h1>
            <div id="status-indicator" class="status-indicator">
                <span id="status-text">Checking connection...</span>
            </div>
        </div>

        <div class="flex-container">
            <label for="test-mode">Test Mode:</label>
            <label class="toggle-switch">
                <input type="checkbox" id="test-mode">
                <span class="slider"></span>
            </label>
            <span class="warning" style="margin: 0; padding: 5px 10px; font-size: 12px;">
                Enable only for development testing
            </span>
        </div>

        <div class="warning">
            <strong>⚠️ SECURITY WARNING:</strong> This application should only be used offline for maximum security. 
            Disconnect from the internet before entering any private keys. The input fields are disabled when online 
            to prevent accidental exposure of sensitive information.
        </div>

        <div id="error-message" class="error hidden"></div>
        <div id="success-message" class="success hidden"></div>

        <form id="transaction-form">
            <div class="form-group">
                <label for="txid">Transaction ID (TXid):</label>
                <input type="text" id="txid" placeholder="Enter the transaction ID of the UTXO (64 hex characters)" disabled>
            </div>

            <div class="form-group">
                <label for="vout">UTXO Index (vout):</label>
                <input type="number" id="vout" placeholder="Enter the index of the UTXO within the transaction" min="0" disabled>
            </div>

            <div class="form-group">
                <label for="private-key">Private Key (WIF format):</label>
                <input type="text" id="private-key" placeholder="Enter your private key starting with 5, K, or L" disabled>
            </div>

            <div class="form-group">
                <label for="target-address">Target Address:</label>
                <input type="text" id="target-address" placeholder="Enter Bitcoin address (legacy 1..., script 3..., or native segwit bc1...)" disabled>
            </div>

            <div class="form-group">
                <label for="amount">Amount (satoshis):</label>
                <input type="number" id="amount" placeholder="Enter amount in satoshis" min="1" disabled>
            </div>

            <div class="form-group">
                <label for="fee">Transaction Fee (satoshis):</label>
                <input type="number" id="fee" placeholder="Enter transaction fee in satoshis" min="1" value="1000" disabled>
            </div>

            <button type="submit" class="button" id="create-tx-btn" disabled>Create Transaction</button>
        </form>

        <div id="transaction-output" class="transaction-output hidden">
            <h3>Transaction Created Successfully</h3>
            <div class="form-group">
                <label for="tx-hex">Transaction Hex:</label>
                <div class="transaction-hex" id="tx-hex"></div>
                <button type="button" class="button copy-button" onclick="copyToClipboard('tx-hex')">Copy Transaction</button>
            </div>
            
            <div class="qr-code">
                <h4>QR Code:</h4>
                <div class="qr-placeholder" id="qr-placeholder">
                    QR code functionality requires external library<br>
                    Use the transaction hex above to broadcast
                </div>
            </div>
        </div>
    </div>

    <!-- Local Bitcoin Library -->
    <script src="bitcoinjs-lib.min.js"></script>
    <script src="qrcode.min.js"></script>

    <!-- Application modules -->
    <script src="utils.js"></script>
    <script src="bitcoin-transaction.js"></script>
    <script src="ui-manager.js"></script>

    <script>
        // Global bitcoin variable
        let bitcoin = window.bitcoin;

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
